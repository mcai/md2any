\BLOCK{if root.latex_documentclass == 'IEEEtran'}
\documentclass[12pt,twocolumn,conference]{IEEEtran}
\BLOCK{elif root.latex_documentclass == 'report'}
\documentclass[12pt,a4paper]{report}
\BLOCK{elif root.latex_documentclass == 'article'}
\documentclass[12pt,a4paper]{article}
\BLOCK{endif}

\usepackage{array}
\usepackage{fancyhdr}
\usepackage{longtable}
\usepackage{graphics}
\usepackage{color}
\usepackage{listings}
\usepackage{float}

\usepackage[unicode=true, bookmarks=true,bookmarksnumbered=true,bookmarksopen=true,bookmarksopenlevel=1, breaklinks=false,pdfborder={0 0 0},backref=false,colorlinks=false]{hyperref}

\hypersetup{pdftitle={\VAR{root.title}}, pdfauthor={\VAR{root.author}}, pdfpagelayout=OneColumn, pdfnewwindow=true, pdfstartview=XYZ, plainpages=false}

\usepackage[caption=false,font=footnotesize]{subfig}

\BLOCK{if root.lang == 'cn'}
\usepackage{xeCJK}
\usepackage[T1]{fontenc}
\usepackage[utf8]{inputenc}
\usepackage{lmodern}
\usepackage{xunicode}
\usepackage{xltxtra}
\usepackage{indentfirst}

\setmainfont{WenQuanYi Zen Hei}
\setsansfont{WenQuanYi Zen Hei}
\setmonofont{WenQuanYi Zen Hei}

\XeTeXlinebreaklocale "zh"
\XeTeXlinebreakskip = 0pt plus 1pt

\usepackage{setspace}
\onehalfspacing

\usepackage{geometry}
\geometry{verbose,tmargin=2cm,bmargin=2cm,lmargin=2cm,rmargin=2cm}

\renewcommand\contentsname{\textbf{目~录}}

\newcommand{\chuhao}{\fontsize{42pt}{42pt}\selectfont}       % 初号, 1.倍行距
\newcommand{\xiaochu}{\fontsize{36pt}{36pt}\selectfont}       % 小初, 1.倍行距
\newcommand{\yihao}{\fontsize{26pt}{26pt}\selectfont}       % 一号, 1.倍行距
\newcommand{\xiaoyi}{\fontsize{24pt}{24pt}\selectfont}      % 小一, 1.倍行距
\newcommand{\erhao}{\fontsize{22pt}{1.25\baselineskip}\selectfont}       % 二号, 1.倍行距
\newcommand{\xiaoer}{\fontsize{18pt}{18pt}\selectfont}      % 小二, 单倍行距
\newcommand{\sanhao}{\fontsize{16pt}{16pt}\selectfont}      % 三号, 1.倍行距
\newcommand{\xiaosan}{\fontsize{15pt}{15pt}\selectfont}     % 小三, 1.倍行距
\newcommand{\sihao}{\fontsize{14pt}{14pt}\selectfont}       % 四号, 1.0倍行距
\newcommand{\xiaosi}{\fontsize{12pt}{12pt}\selectfont}      % 小四, 1.倍行距
\newcommand{\wuhao}{\fontsize{10.5pt}{10.5pt}\selectfont}   % 五号, 单倍行距
\newcommand{\xiaowu}{\fontsize{9pt}{9pt}\selectfont}        % 小五, 单倍行距

\usepackage{titlesec}

\titleformat{name=\chapter}[hang]{\centering\yihao\bfseries}{}{1em}{第{\thechapter}章~}
\titleformat{name=\section}[hang]{\erhao\bfseries}{}{1em}{\thesection}
\titleformat{name=\subsection}[hang]{\sanhao\bfseries}{}{1em}{\thesubsection}
\titleformat{name=\subsubsection}[hang]{\sanhao\bfseries}{}{1em}{\thesubsubsection}
\titleformat{name=\paragraph}[hang]{\xiaosi\bfseries}{}{1em}{}
\titleformat{name=\subparagraph}[hang]{\xiaosi\bfseries}{}{1em}{}
\titleformat{name=\subsubparagraph}[hang]{\xiaosi\bfseries}{}{1em}{}

\titleformat{name=\chapter,numberless}[hang]{\centering\yihao\bfseries}{}{1em}{}
\titleformat{name=\section,numberless}[hang]{\erhao\bfseries}{}{1em}{}
\titleformat{name=\subsection,numberless}[hang]{\sanhao\bfseries}{}{1em}{}
\titleformat{name=\subsubsection,numberless}[hang]{\sanhao\bfseries}{}{1em}{}
\titleformat{name=\paragraph,numberless}[hang]{\xiaosi\bfseries}{}{1em}{}
\titleformat{name=\subparagraph,numberless}[hang]{\xiaosi\bfseries}{}{1em}{}
\titleformat{name=\subsubparagraph,numberless}[hang]{\xiaosi\bfseries}{}{1em}{}

\BLOCK{else}
\usepackage{fontenc}
\BLOCK{endif}

\pagestyle{fancy}
\fancyhf{}
\fancyhead[C]{\VAR{root.title}}
\fancyfoot[C]{\thepage}

\begin{document}

\frontmatter

%%include 'cover.tex'

\BLOCK{if root.latex_documentclass == 'IEEEtran'}
\begin{IEEEkeywords}
\VAR{root.keywords}
\end{IEEEkeywords}
\BLOCK{endif}

% TODO: place abstract here.

\newpage

\tableofcontents{}

\newpage

\mainmatter

\VAR{body}

\newpage

\BLOCK{if root.bib}

\BLOCK{if root.latex_documentclass == 'IEEEtran'}
\bibliographystyle{IEEEtran}
\BLOCK{else}
\bibliographystyle{plain}
\BLOCK{endif}

\bibliography{\VAR{root.bib}}
\BLOCK{endif}

\end{document}